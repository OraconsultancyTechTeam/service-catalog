<!DOCTYPE html>
<html>

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <title> <%= title %></title>

        <style>

            select, select option {
                color: black;
            }

            select:invalid, select option[value=""] {
                color: #a9a9a9;
            }

        </style>
    </head>

    <body style="height: 100vh; display: flex; flex-direction: column;">
        
        <div style="flex: 0 1 auto;">
            <%- include('admin/header.ejs', {active: "Teams"}); %>
        </div>
        
        <!-- <div class="jumbotron text-center" style="background-color: #3EB489; margin-bottom: 0; border-radius: 0;">
            <h1><%#=title%></h1>
        </div> -->
    
        <div class="container-fluid" style="flex: 1 1 auto;">
        
        <div class="row" style="height: 100%;">
        
            <section id="news_content" class="col-12" style="display: flex; flex-flow: column; background-color: #F4F6F9; height: 100%;">
                
            <div id="heading" style="padding: 2%; margin: 2% 0 1%; border: 2px solid #343A40; border-radius: 5px; text-align: center; background-color: #FFFFFF;">

                <h2><%=title%></h2>

            </div>

            <div style="padding: 1%; margin: 1% 0 2%; border: 2px solid #343A40; border-radius: 5px; flex: 1 1 auto; background-color: #FFFFFF;">

                <div style="margin: 1% 3%; padding: 0 1%; border-radius: 5px;">

                    <div id="newTeamDiv" class="col-md-12" style="margin-bottom: 2%; text-align: right;">
                        <a href="/addTeam" class="btn btn-primary" name="addTeamRequest">Add New Team</a>
                    </div>
                
                    <div id="pageContent" style="width: 100%;">

                        <table id="teamsTable" class="table table-striped table-responsive" style="border: 1px solid #ddd;">
                            <thead>
                                <tr>
                                    <th>Team Name</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Team Manager</th>
                                    <th style="text-align: center; border-left: 1px solid;">Update Team</th>
                                    
                                </tr>
                            </thead>

                            <tbody>
                                <% teams_view.forEach(team => { %>
                                    <tr>
                                        <td><%= team.team_name %></td>
                                        <td><%= team.first_name %></td>
                                        <td><%= team.last_name %></td>
                                        <td><%= team.team_manager %></td>
                                        <form id="teamUpdate<%=team.id%>" method="post" action="/teams">
                                        <td style="text-align: center; border-left: 1px solid;">
                                            <select name="teamSelect" id="teamSelect" required onchange="changeTeam('<%=team.id%>')" >
                                                <option value="" disabled selected hidden>Update</option>
                                                <% teams.forEach(team => { %>
                                                    <option value="<%= team.team_id %>"><%= team.team_name %></option>    
                                                <% }) %>
                                            </select>
                                            <input name="id" value="<%= team.id %>" hidden>
                                        </td>
                                        
                                        </form>
                                    </tr>
                                <% }) %>
                            </tbody>
                        </table>

                    </div>

                </div>

            </div>
                
            </section>
        
        </div>
        
        </div>

        <!-- <div style="flex: 0 1 40px;">
        <%#- include('user/footer.ejs') %>
        </div> -->
        <script>

            function changeTeam(teamid){
           
                document.getElementById("teamUpdate"+teamid).submit()
               
            }

        </script>
        
    </body>
</html>